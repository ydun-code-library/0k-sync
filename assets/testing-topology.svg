<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 960 500" width="960" height="500">
  <defs>
    <filter id="shadow" x="-2%" y="-2%" width="104%" height="104%">
      <feDropShadow dx="0" dy="1" stdDeviation="2" flood-opacity="0.1"/>
    </filter>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#5BBFBF"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="960" height="500" rx="12" fill="#F8F7F4"/>

  <!-- Title -->
  <text x="480" y="28" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="14" font-weight="600" fill="#999">Distributed Testing Topology</text>

  <!-- ==================== Q (Mac Mini) ==================== -->
  <rect x="40" y="130" width="240" height="200" rx="8" fill="#2D3436" filter="url(#shadow)"/>
  <text x="160" y="115" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="16" font-weight="700" fill="#2D3436">Q (Mac Mini)</text>

  <text x="160" y="168" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="14" font-weight="600" fill="#5BBFBF">Test Orchestrator</text>

  <text x="160" y="200" text-anchor="middle" font-family="ui-monospace, monospace" font-size="12" fill="#F8F7F4">cargo test -p chaos-tests</text>

  <line x1="70" y1="218" x2="250" y2="218" stroke="#3D4849" stroke-width="1"/>

  <text x="160" y="242" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="13" fill="#F8F7F4">Client-Q</text>
  <text x="160" y="260" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="#888">(native sync-cli)</text>

  <rect x="70" y="278" width="180" height="26" rx="13" fill="#3D4849"/>
  <text x="160" y="296" text-anchor="middle" font-family="ui-monospace, monospace" font-size="10" fill="#5BBFBF">100.114.70.54</text>

  <!-- ==================== Beast (Server) ==================== -->
  <rect x="460" y="45" width="460" height="240" rx="8" fill="#fff" filter="url(#shadow)"/>
  <text x="690" y="38" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="16" font-weight="700" fill="#2D3436">Beast (91GB Server)</text>

  <!-- Relay 1 -->
  <rect x="480" y="70" width="130" height="80" rx="6" fill="#2D3436"/>
  <text x="545" y="98" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="600" fill="#5BBFBF">Relay-1</text>
  <text x="545" y="118" text-anchor="middle" font-family="ui-monospace, monospace" font-size="11" fill="#888">:8090</text>
  <text x="545" y="140" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#555">/health /metrics</text>

  <!-- Relay 2 -->
  <rect x="625" y="70" width="130" height="80" rx="6" fill="#2D3436"/>
  <text x="690" y="98" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="600" fill="#5BBFBF">Relay-2</text>
  <text x="690" y="118" text-anchor="middle" font-family="ui-monospace, monospace" font-size="11" fill="#888">:8091</text>
  <text x="690" y="140" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#555">/health /metrics</text>

  <!-- Relay 3 -->
  <rect x="770" y="70" width="130" height="80" rx="6" fill="#2D3436"/>
  <text x="835" y="98" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="600" fill="#5BBFBF">Relay-3</text>
  <text x="835" y="118" text-anchor="middle" font-family="ui-monospace, monospace" font-size="11" fill="#888">:8092</text>
  <text x="835" y="140" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#555">/health /metrics</text>

  <!-- Docker label -->
  <text x="690" y="170" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="#999">Docker Compose  ·  project: dist-chaos  ·  permanent</text>

  <!-- Client-Beast -->
  <rect x="560" y="190" width="260" height="44" rx="6" fill="#E8E6E1"/>
  <text x="690" y="210" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="13" fill="#555">Client-Beast</text>
  <text x="690" y="226" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#888">(Docker container, sync-cli)</text>

  <!-- Beast IP -->
  <rect x="610" y="248" width="160" height="24" rx="12" fill="#E8E6E1"/>
  <text x="690" y="265" text-anchor="middle" font-family="ui-monospace, monospace" font-size="10" fill="#555">100.71.79.25</text>

  <!-- ==================== Guardian (Raspberry Pi) ==================== -->
  <rect x="540" y="345" width="320" height="120" rx="8" fill="#2D3436" filter="url(#shadow)"/>
  <text x="700" y="338" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="16" font-weight="700" fill="#2D3436">Guardian (Raspberry Pi)</text>

  <text x="700" y="385" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="14" font-weight="600" fill="#5BBFBF">Edge Device Under Test</text>

  <text x="700" y="410" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="13" fill="#F8F7F4">Client-Guardian</text>
  <text x="700" y="428" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="#888">(ARM64 cross-compiled on Beast)</text>

  <rect x="630" y="438" width="140" height="22" rx="11" fill="#3D4849"/>
  <text x="700" y="454" text-anchor="middle" font-family="ui-monospace, monospace" font-size="10" fill="#5BBFBF">100.115.186.91</text>

  <!-- ==================== Tailscale Lines ==================== -->

  <!-- Q → Beast -->
  <line x1="280" y1="190" x2="450" y2="165" stroke="#5BBFBF" stroke-width="2.5" marker-end="url(#arrowhead)" stroke-dasharray="8,4"/>
  <rect x="320" y="156" width="80" height="20" rx="10" fill="#F8F7F4"/>
  <text x="360" y="170" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="600" fill="#5BBFBF">Tailscale</text>

  <!-- Q → Guardian -->
  <line x1="280" y1="280" x2="530" y2="390" stroke="#5BBFBF" stroke-width="2.5" marker-end="url(#arrowhead)" stroke-dasharray="8,4"/>
  <rect x="360" y="322" width="80" height="20" rx="10" fill="#F8F7F4"/>
  <text x="400" y="337" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="600" fill="#5BBFBF">Tailscale</text>

  <!-- Beast → Guardian (for relay traffic) -->
  <line x1="690" y1="285" x2="690" y2="335" stroke="#888" stroke-width="1.5" stroke-dasharray="4,4"/>
  <text x="720" y="315" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#999">QUIC</text>

  <!-- ==================== Bottom Legend ==================== -->
  <rect x="40" y="475" width="880" height="1" fill="#E8E6E1"/>

  <!-- Legend items -->
  <line x1="60" y1="492" x2="90" y2="492" stroke="#5BBFBF" stroke-width="2.5" stroke-dasharray="8,4"/>
  <text x="98" y="496" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="#888">SSH orchestration (Tailscale WireGuard)</text>

  <line x1="340" y1="492" x2="370" y2="492" stroke="#888" stroke-width="1.5" stroke-dasharray="4,4"/>
  <text x="378" y="496" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="#888">QUIC relay traffic</text>

  <rect x="530" y="484" width="12" height="12" rx="2" fill="#2D3436"/>
  <text x="550" y="496" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="#888">Dark = client/native process</text>

  <rect x="740" y="484" width="12" height="12" rx="2" fill="#E8E6E1"/>
  <text x="760" y="496" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="#888">Light = Docker container</text>
</svg>
